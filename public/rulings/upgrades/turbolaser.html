<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>KARM Rulings Book</title>
    <link rel="preload" href="/rulings/fonts/optima.woff?v=rulings-v1" as="font" type="font/woff" crossorigin />
    <link rel="preload" href="/rulings/fonts/optima-italic.woff?v=rulings-v1" as="font" type="font/woff" crossorigin />
    <link rel="preload" href="/rulings/fonts/optima-bold.woff?v=rulings-v1" as="font" type="font/woff" crossorigin />
    <link rel="preload" href="/rulings/fonts/RevengerLiteBB.woff?v=rulings-v1" as="font" type="font/woff" crossorigin />
    <link rel="preload" href="/rulings/fonts/TeutonFett.woff?v=rulings-v1" as="font" type="font/woff" crossorigin />
    <link rel="preload" href="/rulings/fonts/icons.woff?v=rulings-v1" as="font" type="font/woff" crossorigin />
    <style>
      :root { --page-background: url('/rulings/assets/rulebook-background.webp?v=rulings-v1'); }
      
@font-face {
  font-family: 'OptimaCustom';
  src: url('/rulings/fonts/optima.woff?v=rulings-v1') format('woff');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'OptimaCustom';
  src: url('/rulings/fonts/optima-italic.woff?v=rulings-v1') format('woff');
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'OptimaCustom';
  src: url('/rulings/fonts/optima-bold.woff?v=rulings-v1') format('woff');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'AeroMaticsDisplay';
  src: url('/rulings/fonts/fighter-keyword.woff?v=rulings-v1') format('woff');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'AeroMaticsDisplay';
  src: url('/rulings/fonts/fighter-keyword.woff?v=rulings-v1') format('woff');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'TeutonFett';
  src: url('/rulings/fonts/TeutonFett.woff?v=rulings-v1') format('woff');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'RevengerLite';
  src: url('/rulings/fonts/RevengerLiteBB.woff?v=rulings-v1') format('woff');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Icons';
  src: url('/rulings/fonts/icons.woff?v=rulings-v1') format('woff');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'ArmadaIcons';
  src: url('/rulings/fonts/icons.woff?v=rulings-v1') format('woff');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
      :root {
  --page-width: 2194px;
  --page-height: 2820px;
  --page-scale: 1;
  --page-padding-y: 120px;
  --page-padding-x: 129px;
  --page-gap: 24px;
  --ink: #221e1d;
  --accent: #24408f;
}

* {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  padding: 0;
  color: var(--ink);
  font-family: "OptimaCustom", Optima, "Segoe UI", Arial, sans-serif;
  background: #444;
}

.toc-fab {
  position: fixed;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  z-index: 30;
  border: 0;
  border-radius: 999px;
  width: 56px;
  height: 56px;
  padding: 0;
  background: #24408f;
  color: #fff;
  font-family: "OptimaCustom", Optima, "Segoe UI", Arial, sans-serif;
  cursor: pointer;
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.28);
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.hamburger {
  display: inline-flex;
  flex-direction: column;
  justify-content: center;
  gap: 5px;
}

.hamburger > span {
  display: block;
  width: 24px;
  height: 3px;
  border-radius: 999px;
  background: #fff;
}

.toc-drawer {
  position: fixed;
  top: 0;
  right: 0;
  width: min(380px, 88vw);
  height: 100vh;
  z-index: 29;
  background: rgba(245, 242, 235, 0.98);
  border-left: 1px solid rgba(36, 64, 143, 0.25);
  box-shadow: -16px 0 40px rgba(0, 0, 0, 0.2);
  padding: 18px 16px 24px;
  overflow: auto;
  transform: translateX(104%);
  transition: transform 180ms ease;
}

body.toc-open .toc-drawer {
  transform: translateX(0);
}

.toc-title {
  font-family: "TeutonFett", "AeroMaticsDisplay", sans-serif;
  font-size: 36px;
  margin: 0 0 10px;
}

.toc-link {
  display: block;
  color: #1f1f1f;
  text-decoration: none;
  padding: 8px 4px;
  border-bottom: 1px solid rgba(36, 64, 143, 0.15);
  font-size: 20px;
  line-height: 1.2;
}

.toc-link:hover {
  color: #24408f;
}

.toc-link.toc-sub {
  padding-left: 16px;
  font-size: 17px;
}

.toc-section-label {
  font-family: "TeutonFett", "AeroMaticsDisplay", sans-serif;
  font-size: 20px;
  color: var(--accent);
  padding: 12px 4px 4px;
  letter-spacing: 0.02em;
}

/* ── Search FAB ── */

.search-fab {
  position: fixed;
  right: 10px;
  top: calc(50% + 70px);
  transform: translateY(-50%);
  z-index: 30;
  border: 0;
  border-radius: 999px;
  width: 56px;
  height: 56px;
  padding: 0;
  background: #24408f;
  color: #fff;
  font-family: "OptimaCustom", Optima, "Segoe UI", Arial, sans-serif;
  cursor: pointer;
  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.28);
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.search-fab svg {
  display: block;
}

/* ── Search drawer ── */

.search-drawer {
  position: fixed;
  top: 0;
  right: 0;
  width: min(380px, 88vw);
  height: 100vh;
  z-index: 29;
  background: rgba(245, 242, 235, 0.98);
  border-left: 1px solid rgba(36, 64, 143, 0.25);
  box-shadow: -16px 0 40px rgba(0, 0, 0, 0.2);
  padding: 18px 16px 24px;
  overflow: auto;
  transform: translateX(104%);
  transition: transform 180ms ease;
}

body.search-open .search-drawer {
  transform: translateX(0);
}

.search-drawer-title {
  font-family: "TeutonFett", "AeroMaticsDisplay", sans-serif;
  font-size: 36px;
  margin: 0 0 16px;
}

.search-input {
  width: 100%;
  font-family: "OptimaCustom", Optima, "Segoe UI", Arial, sans-serif;
  font-size: 18px;
  padding: 10px 12px;
  border: none;
  border-bottom: 2px solid rgba(36, 64, 143, 0.35);
  background: transparent;
  outline: none;
  color: #221e1d;
  margin-bottom: 18px;
}

.search-input:focus {
  border-bottom-color: #24408f;
}

.search-input::placeholder {
  color: #999;
}

/* ── Faction filter buttons ── */

.faction-filters {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 12px;
}

.faction-btn {
  width: 44px;
  height: 44px;
  border-radius: 999px;
  border: 2px solid #ccc;
  background: #e8e5de;
  color: #999;
  font-size: 14px;
  font-weight: 700;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: background 120ms, border-color 120ms, color 120ms;
  padding: 0;
  font-family: "OptimaCustom", Optima, "Segoe UI", Arial, sans-serif;
}

.faction-btn .icon-font {
  font-size: 22px;
  line-height: 1;
}

.faction-btn[data-faction="all"] {
  font-size: 15px;
  letter-spacing: 0.02em;
}

.faction-btn.active {
  border-color: #24408f;
  background: #24408f;
  color: #fff;
}

.faction-btn.faction-rebel.active {
  background: #c0392b;
  border-color: #c0392b;
}

.faction-btn.faction-empire.active {
  background: #2e7d32;
  border-color: #2e7d32;
}

.faction-btn.faction-republic.active {
  background: #b8860b;
  border-color: #b8860b;
}

.faction-btn.faction-separatist.active {
  background: #1565c0;
  border-color: #1565c0;
}

.faction-btn.faction-neutral.active {
  background: #666;
  border-color: #666;
}

.faction-btn.faction-scum.active {
  background: #5d4037;
  border-color: #5d4037;
}

.faction-btn.faction-nr.active {
  background: #607d8b;
  border-color: #607d8b;
}

.search-result-count {
  font-size: 14px;
  color: #666;
  padding: 4px 0;
}

/* ── Filtered-out cards and dividers ── */

.karm-card.filtered-out,
.card-divider.filtered-out {
  display: none;
}

.no-results {
  text-align: center;
  padding: 48px 24px;
  font-size: 18px;
  color: #666;
  font-family: "OptimaCustom", Optima, "Segoe UI", Arial, sans-serif;
  display: none;
}

.no-results.visible {
  display: block;
}

@media (max-width: 760px) {
  .toc-fab {
    top: auto;
    bottom: 14px;
    right: 14px;
    transform: none;
  }

  .search-fab {
    top: auto;
    bottom: 80px;
    right: 14px;
    transform: none;
  }
}

@page {
  size: 2194px 2820px;
  margin: 0;
}

.karm-book {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 8px;
}

.karm-page-shell {
  display: flex;
  justify-content: center;
  width: 100%;
  height: calc(var(--page-height) * var(--page-scale));
  overflow: hidden;
}

.karm-page {
  width: var(--page-width);
  height: var(--page-height);
  margin: 0;
  display: flex;
  flex-direction: column;
  position: relative;
  isolation: isolate;
  overflow: hidden;
  background-color: #f5f2eb;
  background-image: var(--page-background);
  background-size: cover;
  background-repeat: no-repeat;
  padding: var(--page-padding-y) var(--page-padding-x);
  gap: var(--page-gap);
  transform: scale(var(--page-scale));
  transform-origin: top center;
}

.karm-static-page {
  width: 100%;
  height: 100%;
}

.page-body {
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 56px;
}

.page-number {
  position: absolute;
  right: 88px;
  bottom: 76px;
  color: var(--accent);
  font-size: 54px;
  line-height: 1;
  text-transform: uppercase;
  letter-spacing: 0.03em;
  font-family: "RevengerLite", Impact, sans-serif;
}

.karm-card {
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 14px;
  break-inside: avoid;
  page-break-inside: avoid;
}

.card-top {
  display: flex;
  gap: 25px;
  min-height: 500px;
}

.card-image-wrap {
  width: 350px;
  min-width: 350px;
}

.card-image {
  width: 350px;
  height: 498px;
  border-radius: 14px;
  object-fit: cover;
  background: #d9d9d9;
  border: 1px solid rgba(0, 0, 0, 0.15);
}

.card-image.fallback {
  display: flex;
  align-items: center;
  justify-content: center;
  color: #666;
  font-style: italic;
}

.card-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.card-title {
  font-family: "TeutonFett", "Teuton Fett", "AeroMaticsDisplay", "Arial Narrow", sans-serif;
  font-size: 52px;
  line-height: 1.04;
  letter-spacing: -0.045em;
  font-variant: small-caps;
  text-transform: none;
  margin: 0;
}

.card-meta {
  font-size: 29px;
  line-height: 1.2;
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 12px;
}

.card-faction-icon {
  width: 34px;
  height: 34px;
  object-fit: contain;
  vertical-align: middle;
}

.card-body,
.card-keywords,
.card-rulings {
  font-weight: 400;
  font-size: 29px;
  line-height: 35px;
  letter-spacing: 0.006em;
}

.card-keywords {
  font-size: 27px;
}

.card-keyword-label {
  font-family: "AeroMaticsDisplay", "RevengerLite", "Trajan Pro", Georgia, serif;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: var(--accent);
  margin-right: 8px;
}

.squadron-keywords .squadron-keyword-values,
.squadron-keywords .squadron-keyword-token {
  font-family: "AeroMaticsDisplay", "RevengerLite", "Trajan Pro", Georgia, serif;
  font-weight: 700;
}

.squadron-keywords .squadron-keyword-token {
  letter-spacing: 0.01em;
}

.card-bottom {
  font-weight: 400;
  font-size: 29px;
  line-height: 35px;
  letter-spacing: 0.006em;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.top-summary {
  display: flex;
  flex-direction: column;
  gap: 18px;
  margin-top: 6px;
}

.top-summary-block {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.top-summary-label {
  font-family: "OptimaCustom", Optima, "Segoe UI", Arial, sans-serif;
  font-size: 46px;
  font-weight: 700;
  line-height: 1.05;
  text-transform: capitalize;
}

.top-summary-text {
  font-size: 29px;
  line-height: 1.22;
  font-weight: 400;
  font-family: "OptimaCustom", Optima, "Segoe UI", Arial, sans-serif;
}

.top-summary-text p {
  margin: 0;
}

.ruling-section {
  break-inside: avoid;
  page-break-inside: avoid;
}

.ruling-heading {
  margin: 0 0 2px;
  font-size: 46px;
  line-height: 1.1;
  font-family: "OptimaCustom", Optima, "Segoe UI", Arial, sans-serif;
  font-weight: 700;
  color: #202020;
}

.ruling-content {
  margin: 0;
}

.ruling-content p {
  margin: 0 0 6px;
  font-weight: 400;
}

.ruling-content ul {
  margin: 0;
  padding-left: 32px;
}

.ruling-content li,
.ruling-content li p,
.card-text-content,
.card-text-content p {
  font-weight: 400;
}

.footnote-ref {
  display: inline-block;
  font-size: 0.72em;
  line-height: 0;
  vertical-align: baseline;
  transform: translateY(-0.38em);
  margin-left: 0.12em;
}

.card-text-content p {
  margin: 0 0 8px;
}

.icon-font {
  font-family: "Icons", "ArmadaIcons", "RevengerLite", sans-serif;
  font-style: normal;
  font-weight: 400;
  font-variant: normal;
  text-transform: none;
  line-height: 1;
  speak: never;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  display: inline-block;
}

.faction-icon-nr {
  display: inline-block;
  width: 0.85em;
  height: 0.85em;
  vertical-align: middle;
}

.faction-icon-nr svg {
  width: 100%;
  height: 100%;
  display: block;
}

.faction-btn .faction-icon-nr {
  width: 22px;
  height: 22px;
}

.ruling-footnotes {
  margin-top: 14px;
  border-top: 1px solid rgba(36, 64, 143, 0.3);
  padding-top: 8px;
  font-size: 18px;
  line-height: 1.35;
  font-weight: 400;
}

.karm-header-card {
  min-height: 760px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.section-header-title {
  font-size: 116px;
  line-height: 1;
  letter-spacing: 0.02em;
  text-transform: uppercase;
  color: var(--accent);
  font-family: "RevengerLite", "Trajan Pro", Georgia, serif;
}

.ruling-content blockquote {
  margin: 8px 0;
  padding: 6px 0 6px 18px;
  border-left: 5px solid rgba(36, 64, 143, 0.4);
  font-style: italic;
}

.ruling-content code {
  font-family: "SFMono-Regular", Consolas, monospace;
  background: rgba(0, 0, 0, 0.05);
  padding: 0 4px;
  border-radius: 4px;
}

.keyword-name {
  font-family: "AeroMaticsDisplay", "RevengerLite", sans-serif;
  font-weight: 400;
  font-style: normal;
}

.card-ref {
  color: inherit;
  text-decoration: none;
  border-bottom: 1px dotted currentColor;
  transition: border-color 0.15s;
}

.card-ref:hover {
  border-bottom-style: solid;
  color: #1565c0;
}

.card-ref em {
  font-style: italic;
}

/* ── ARC points-only toggle ── */

.arc-points-toggle {
  display: inline-flex;
  align-items: center;
  border: 1.5px solid rgba(36, 64, 143, 0.4);
  border-radius: 6px;
  background: transparent;
  color: var(--accent);
  font-family: "AeroMaticsDisplay", "RevengerLite", sans-serif;
  font-size: 0.38em;
  font-weight: 700;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  padding: 3px 8px 2px;
  margin-left: 10px;
  cursor: pointer;
  transition: background 120ms, color 120ms;
}
.arc-points-toggle:hover { background: rgba(36, 64, 143, 0.08); }
.arc-points-toggle.arc-active { background: var(--accent); color: #fff; border-color: var(--accent); }

/* ── Continuous responsive web layout ── */

body.karm-web {
  background: #f5f2eb;
  background-image: var(--page-background);
  background-size: cover;
  background-position: center top -60px;
  background-attachment: fixed;
  background-repeat: no-repeat;
  overflow-x: hidden;
}

body.karm-web .karm-book {
  max-width: 960px;
  width: 100%;
  margin: 0 auto;
  padding: 32px 24px;
  gap: 0;
  overflow-wrap: break-word;
  word-wrap: break-word;
}

body.karm-web .karm-page-shell,
body.karm-web .karm-page {
  display: none;
}

body.karm-web .karm-continuous {
  display: flex;
  flex-direction: column;
  gap: 0;
}

body.karm-web .page-number {
  display: none;
}

/* ── Card layout ── */

body.karm-web .karm-card {
  max-width: 100%;
}

body.karm-web .card-top {
  min-height: auto;
  gap: 20px;
}

body.karm-web .card-main {
  min-width: 0;
  flex: 1;
}

body.karm-web .card-image-wrap {
  width: 220px;
  min-width: 220px;
  flex-shrink: 0;
}

body.karm-web .card-image {
  width: 220px;
  height: 312px;
  max-width: 100%;
  border-radius: 10px;
}

/* ── Typography ── */

body.karm-web .card-title {
  font-size: 28px;
  letter-spacing: -0.03em;
}

body.karm-web .card-meta {
  font-size: 16px;
  gap: 8px;
}

body.karm-web .card-body,
body.karm-web .card-keywords,
body.karm-web .card-rulings,
body.karm-web .card-bottom {
  font-size: 16px;
  line-height: 1.5;
}

body.karm-web .card-keywords {
  font-size: 15px;
}

body.karm-web .top-summary-label {
  font-size: 24px;
}

body.karm-web .top-summary-text {
  font-size: 16px;
  line-height: 1.45;
}

body.karm-web .ruling-heading {
  font-size: 24px;
}

body.karm-web .ruling-content ul {
  padding-left: 24px;
}

body.karm-web .ruling-footnotes {
  font-size: 13px;
}

body.karm-web .section-header-title {
  font-size: 48px;
}

body.karm-web .karm-header-card {
  min-height: 120px;
  padding: 24px 0;
}

body.karm-web .arc-points-toggle { font-size: 11px; padding: 2px 7px 1px; }

body.karm-web .card-divider {
  border: none;
  border-top: 1px solid rgba(36, 64, 143, 0.2);
  margin: 28px 0;
}

/* ── Tablet ── */

@media (max-width: 768px) {
  body.karm-web .karm-book {
    padding: 24px 16px;
  }

  body.karm-web .card-top {
    flex-direction: column;
    align-items: flex-start;
    gap: 16px;
  }

  body.karm-web .card-image-wrap {
    width: auto;
    min-width: unset;
    flex-shrink: unset;
  }

  body.karm-web .card-image {
    width: 180px;
    height: 256px;
  }

  body.karm-web .card-title {
    font-size: 24px;
  }

  body.karm-web .section-header-title {
    font-size: 36px;
  }

  body.karm-web .karm-header-card {
    min-height: 80px;
    padding: 16px 0;
  }
}

/* ── Mobile ── */

@media (max-width: 480px) {
  body.karm-web .karm-book {
    padding: 16px 12px;
  }

  body.karm-web .card-top {
    align-items: center;
  }

  body.karm-web .card-image {
    width: 160px;
    height: 228px;
  }

  body.karm-web .card-title {
    font-size: 22px;
    text-align: center;
  }

  body.karm-web .card-body,
  body.karm-web .card-keywords,
  body.karm-web .card-rulings,
  body.karm-web .card-bottom {
    font-size: 15px;
    line-height: 1.45;
  }

  body.karm-web .top-summary-label {
    font-size: 20px;
  }

  body.karm-web .ruling-heading {
    font-size: 20px;
  }

  body.karm-web .section-header-title {
    font-size: 28px;
  }

  body.karm-web .card-divider {
    margin: 20px 0;
  }
}

@media print {
  .arc-points-toggle { display: none !important; }

  .toc-fab,
  .toc-drawer,
  .search-fab,
  .search-drawer,
  .no-results {
    display: none !important;
  }

  .card-ref {
    border-bottom: none;
    color: inherit;
  }

  :root {
    --page-scale: 1;
  }

  html,
  body {
    background: transparent;
  }

  .karm-book {
    gap: 0;
    padding: 0;
  }

  .karm-page-shell {
    height: auto;
    overflow: visible;
  }

  .karm-page {
    margin: 0;
    transform: none;
    page-break-after: always;
    break-after: page;
  }

  .karm-page:last-child {
    page-break-after: auto;
    break-after: auto;
  }
}

    </style>
  </head>
  <body class="karm-web">
    
<button type="button" class="toc-fab" aria-label="Open rulings menu" onclick="document.body.classList.toggle('toc-open'); document.body.classList.remove('search-open');">
  <span class="hamburger" aria-hidden="true"><span></span><span></span><span></span></span>
</button>
<aside class="toc-drawer" aria-label="Rulings navigation">
  <div class="toc-title">Rulings</div>
  <a href="/rulings/objectives.html" class="toc-link">Objectives</a>
<a href="/rulings/campaign.html" class="toc-link">Campaign Objectives</a>
<a href="/rulings/damage-cards.html" class="toc-link">Damage Cards</a>
<a href="/rulings/squadrons.html" class="toc-link">Ace Squadrons</a>
<div class="toc-section-label">Upgrades</div>
<a href="/rulings/upgrades.html" class="toc-link toc-sub">All</a>
<a href="/rulings/upgrades/commander.html" class="toc-link toc-sub">Commander</a>
<a href="/rulings/upgrades/officer.html" class="toc-link toc-sub">Officer</a>
<a href="/rulings/upgrades/weapons-team-offensive-retro.html" class="toc-link toc-sub">Boarding Teams</a>
<a href="/rulings/upgrades/weapons-team.html" class="toc-link toc-sub">Weapons Team</a>
<a href="/rulings/upgrades/offensive-retro.html" class="toc-link toc-sub">Offensive Retrofit</a>
<a href="/rulings/upgrades/defensive-retro.html" class="toc-link toc-sub">Defensive Retrofit</a>
<a href="/rulings/upgrades/turbolaser.html" class="toc-link toc-sub">Turbolaser</a>
<a href="/rulings/upgrades/ion-cannon.html" class="toc-link toc-sub">Ion Cannon</a>
<a href="/rulings/upgrades/ordnance.html" class="toc-link toc-sub">Ordnance</a>
<a href="/rulings/upgrades/fleet-support.html" class="toc-link toc-sub">Fleet Support</a>
<a href="/rulings/upgrades/support-team.html" class="toc-link toc-sub">Support Team</a>
<a href="/rulings/upgrades/experimental-retro.html" class="toc-link toc-sub">Experimental Retrofit</a>
<a href="/rulings/upgrades/fleet-command.html" class="toc-link toc-sub">Fleet Command</a>
<a href="/rulings/upgrades/title.html" class="toc-link toc-sub">Title</a>
<a href="/rulings/upgrades/super-weapon.html" class="toc-link toc-sub">Superweapon</a>
<div class="toc-section-label">Nexus</div>
<a href="/rulings/nexus-upgrades.html" class="toc-link toc-sub">Nexus Upgrades</a>
<a href="/rulings/nexus-squadrons.html" class="toc-link toc-sub">Nexus Squadrons</a>
</aside>
<button type="button" class="search-fab" aria-label="Search cards" onclick="document.body.classList.toggle('search-open'); document.body.classList.remove('toc-open');">
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
</button>
<aside class="search-drawer" aria-label="Search and filter">
  <div class="search-drawer-title">Search &amp; Filter</div>
  <input type="text" class="search-input" id="karm-search-input" placeholder="Search cards..." autocomplete="off" />
  <div class="faction-filters" id="karm-faction-filters">
    <button type="button" class="faction-btn active" data-faction="all" aria-label="All factions" title="All">All</button>
    <button type="button" class="faction-btn faction-rebel active" data-faction="rebel" aria-label="Rebel Alliance" title="Rebel"><span class="icon-font">[</span></button>
    <button type="button" class="faction-btn faction-empire active" data-faction="empire" aria-label="Galactic Empire" title="Empire"><span class="icon-font">\</span></button>
    <button type="button" class="faction-btn faction-republic active" data-faction="republic" aria-label="Republic" title="Republic"><span class="icon-font">|</span></button>
    <button type="button" class="faction-btn faction-separatist active" data-faction="separatist" aria-label="Separatist" title="Separatist"><span class="icon-font">}</span></button>
    <button type="button" class="faction-btn faction-neutral active" data-faction="neutral" aria-label="Neutral" title="Neutral">&#9733;</button>
    <button type="button" class="faction-btn faction-scum active" data-faction="scum" aria-label="Scum" title="Scum"><span class="icon-font">{</span></button>
    <button type="button" class="faction-btn faction-nr active" data-faction="new-republic" aria-label="New Republic" title="New Republic"><span class="faction-icon-nr"><svg viewBox="0 0 600 600" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M299.97 9C139.338 9 9 139.401 9 300.033C9 460.665 139.338 591.003 299.97 591.003C460.602 591.003 591.003 460.665 591.003 300.033C591.003 139.401 460.602 9 299.97 9Z" stroke="currentColor" stroke-width="10"/> <path d="M253.278 38.4763L249.829 55.5352L242.429 49.7022L244.373 59.047L227.502 54.5944L240.61 66.0086L231.767 69.5833L240.861 72.5307L228.568 84.8856L245.063 79.2412L243.746 88.6487L250.832 82.3146L255.411 99.1223L258.797 82.0636L266.198 87.8964L264.316 78.6142L281.124 83.0043L268.017 71.5901L276.86 68.0155L267.828 65.0047L280.058 52.6497L263.627 58.2942L264.881 48.8872L257.794 55.2841L253.278 38.4763ZM349.422 39.1034L345.345 55.9736L338.133 49.8906L339.638 59.2349L323.018 54.0921L335.562 66.0713L326.656 69.2694L335.624 72.6566L322.83 84.5099L339.45 79.5549L337.819 88.8373L345.157 82.8163L349.046 99.8125L353.122 82.8789L360.334 89.025L358.829 79.6176L375.386 84.7603L362.78 72.7818L371.749 69.6457L362.78 66.3219L375.574 54.406L358.892 59.2976L360.648 50.0158L353.31 56.0369L349.422 39.1034ZM164.598 76.2311L161.023 93.2271L153.623 87.2691L155.379 96.6764L138.696 91.9727L151.616 103.575L142.71 107.025L151.741 110.161L139.324 122.39L155.818 116.934L154.375 126.341L161.588 120.069L165.978 136.94L169.553 119.944L176.953 125.902L175.134 116.495L191.88 121.136L178.96 109.596L187.803 106.146L178.835 103.01L191.252 90.844L174.758 96.1747L176.138 86.8299L168.926 93.1018L164.598 76.2311ZM437.35 77.9872L433.398 94.9201L426.123 88.7747L427.754 98.2443L411.009 93.1645L423.678 105.018L414.772 108.279L423.74 111.603L411.009 123.519L427.691 118.502L425.998 127.846L433.336 121.763L437.287 138.696L441.238 121.763L448.513 127.909L446.882 118.502L463.565 123.519L450.959 111.666L459.864 108.404L450.896 105.08L463.627 93.2271L447.008 98.1815L448.638 88.8373L441.238 94.9835L437.35 77.9872ZM97.304 148.103L93.7292 165.037L86.3287 159.142L88.1476 168.486L71.4651 163.845L84.3219 175.447L75.4788 178.897L84.5099 181.97L72.0922 194.137L88.5864 188.743L87.2068 198.151L94.4191 191.879L98.8091 208.75L102.321 191.816L109.722 197.649L107.903 188.304L124.648 193.008L111.729 181.343L120.572 177.956L111.603 174.821L123.958 162.654L107.464 168.047L108.906 158.703L101.694 164.911L97.304 148.103ZM503.264 150.675L499.438 167.608L492.1 161.525L493.794 170.995L477.111 166.04L489.843 177.831L480.937 181.092L489.905 184.416L477.3 196.395L493.919 191.252L492.351 200.597L499.626 194.451L503.766 211.384L507.591 194.451L514.866 200.471L513.173 191.064L529.855 195.956L517.124 184.228L526.093 180.904L517.061 177.643L529.667 165.664L513.11 170.806L514.678 161.399L507.34 167.608L503.264 150.675ZM65.319 243.055L61.6187 260.051L54.2182 254.031L55.9743 263.438L39.2291 258.672L52.0859 270.274L43.243 273.723L52.2114 276.922L39.6681 288.963L56.225 283.695L54.7827 293.103L62.0577 286.831L66.1969 303.827L69.8972 286.831L77.235 292.789L75.4788 283.444L92.2868 288.274L79.43 276.483L88.273 273.159L79.3045 270.023L91.785 257.857L75.228 263.125L76.7959 253.78L69.5836 259.989L65.319 243.055ZM534.434 246.316L530.608 263.187L523.27 257.167L524.964 266.511L508.219 261.619L520.95 273.472L512.107 276.734L521.012 279.995L508.407 291.973L525.026 286.831L523.458 296.176L530.733 290.092L534.873 306.963L538.698 290.092L546.036 296.113L544.343 286.705L561.025 291.66L548.231 279.87L557.137 276.546L548.168 273.284L560.774 261.243L544.28 266.449L545.848 257.104L538.51 263.187L534.434 246.316ZM75.9179 343.965L72.1549 360.961L64.8172 354.94L66.5105 364.285L49.7655 359.393L62.5594 371.184L53.6538 374.508L62.6849 377.706L50.079 389.81L66.6359 384.605L65.1308 393.887L72.4057 387.803L76.5451 404.737L80.3708 387.741L87.7085 393.762L85.9524 384.354L102.698 389.246L89.9036 377.455L98.8091 374.131L89.7781 370.933L102.447 358.891L85.827 364.097L87.3949 354.752L80.1199 360.899L75.9179 343.965ZM522.267 347.164L518.504 364.159L511.166 358.202L512.922 367.547L496.177 362.78L509.034 374.445L500.191 377.832L509.159 381.03L496.616 393.134L513.173 387.866L511.668 397.211L518.943 391.002L523.145 407.936L526.845 390.94L534.183 396.96L532.427 387.553L549.172 392.319L536.378 380.654L545.221 377.267L536.19 374.069L548.733 361.965L532.176 367.233L533.681 357.888L526.406 364.097L522.267 347.164ZM125.589 429.384L122.202 446.381L114.676 440.548L116.621 449.892L99.8127 445.376L112.795 456.854L104.015 460.366L113.108 463.376L100.691 475.668L117.185 470.212L115.868 479.494L123.017 473.223L127.533 490.094L130.92 473.035L138.383 478.93L136.501 469.522L153.309 474.038L140.264 462.561L149.045 459.049L140.014 456.038L152.306 443.683L135.874 449.265L137.191 439.858L130.104 446.192L125.589 429.384ZM471.342 431.955L467.265 448.764L459.99 442.68L461.558 452.024L444.875 446.882L457.481 458.923L448.576 462.059L457.481 465.446L444.687 477.299L461.37 472.345L459.614 481.689L467.014 475.668L470.84 492.602L474.979 475.731L482.191 481.877L480.686 472.47L497.243 477.613L484.7 465.696L493.606 462.499L484.7 459.111L497.494 447.258L480.812 452.15L482.568 442.868L475.167 448.889L471.342 431.955ZM205.426 485.64L201.538 502.574L194.263 496.49L195.894 505.898L179.211 500.943L191.88 512.733L183.037 516.057L192.005 519.319L179.336 531.297L195.956 526.218L194.326 535.562L201.663 529.416L205.74 546.349L209.628 529.416L216.903 535.499L215.273 526.092L231.892 531.047L219.161 519.256L228.067 515.932L219.098 512.671L231.767 500.692L215.21 505.773L216.778 496.427L209.503 502.574L205.426 485.64ZM391.567 486.957L387.49 503.891L380.278 497.745L381.846 507.152L365.164 502.072L377.832 513.988L368.864 517.249L377.832 520.573L365.101 532.426L381.721 527.472L380.09 536.817L387.428 530.733L391.379 547.729L395.33 530.796L402.542 536.942L400.974 527.472L417.657 532.615L405.051 520.699L413.957 517.5L404.988 514.113L417.719 502.26L401.1 507.215L402.793 497.87L395.393 503.954L391.567 486.957ZM298.246 505.396L294.295 522.392L287.02 516.308L288.713 525.716L271.968 520.761L284.699 532.552L275.856 535.876L284.825 539.137L272.156 551.116L288.776 546.036L287.208 555.38L294.483 549.171L298.559 566.168L302.448 549.234L309.723 555.255L308.029 545.848L324.712 550.803L311.981 539.012L320.886 535.688L311.918 532.426L324.586 520.448L307.967 525.59L309.597 516.246L302.322 522.392L298.246 505.396Z" fill="currentColor"/> <path d="M300.002 99.0597L263.376 142.961C276.014 160.727 281.312 179.016 281.312 189.747C267.891 173.566 259.864 167.545 249.829 157.511L223.927 184.416C259.889 201.637 277.926 235.966 277.926 271.905C277.926 292.31 269.716 337.394 225.244 335.499C192.442 331.692 160.349 287.361 157.574 246.568C154.807 205.895 176.047 170.114 205.05 137.254C145.504 171.633 107.339 233.773 107.339 291.974C107.339 411.265 192.913 490.658 300.002 490.658C407.09 490.658 492.665 411.265 492.665 291.974C492.665 233.773 454.499 171.633 394.954 137.254C423.957 170.114 445.196 205.895 442.429 246.568C439.655 287.361 407.562 331.692 374.759 335.499C330.287 337.394 322.078 292.31 322.078 271.905C322.078 235.966 340.114 201.637 376.076 184.416L350.174 157.511C340.14 167.545 332.112 173.566 318.691 189.747C318.691 179.016 323.989 160.727 336.628 142.961L300.002 99.0597Z" fill="currentColor"/> </svg></span></button>
  </div>
  <div class="search-result-count" id="karm-result-count"></div>
</aside>
<div class="no-results" id="karm-no-results">No matching cards found.</div>
    <div class="karm-book">
      
      <div class="karm-continuous">
<article class="karm-card karm-header-card" id="header-turbolaser" data-category="header">
  <div class="section-header-title">Turbolaser <span class="icon-font">D</span></div>
</article>

<article class="karm-card" id="dby-827-heavy-turbolaser-turbolaser" data-name="dby-827 heavy turbolaser" data-factions="" data-category="upgrades" data-type="turbolaser">
  <div class="card-top">
    <div class="card-image-wrap"><img class="card-image" src="https://images.swarmada.wiki/images/dby-827-heavy-turbolaser.webp" alt="DBY-827 Heavy Turbolaser" /></div>
    <div class="card-main">
      <h2 class="card-title">DBY-827 Heavy Turbolaser <span class="icon-font"> D</span></h2>
      <div class="top-summary">
<div class="top-summary-block">
  <div class="top-summary-label">Card Text</div>
  <div class="top-summary-text"><p>While performing a <span class="icon-font">6</span> attack, you may change 1 die to a face with a <span class="icon-font">T</span> icon.</p></div>
</div>
<div class="top-summary-block">
  <div class="top-summary-label">Timing</div>
  <div class="top-summary-text">This Upgrade Card may be resolved during the &#39;Resolve Attack Effects&#39; step.</div>
</div></div>
    </div>
  </div>
  <div class="card-bottom card-rulings">
<div class="ruling-section">
  <h3 class="ruling-heading">Clarifications</h3>
  <div class="ruling-content"><ul><li>This Upgrade Card can change a black die to a hit/crit face. <span class="footnote-ref">[1]</span></li></ul></div>
</div></div>
  <div class="ruling-footnotes"><div>[1] ARC | 2025-07-11 | ARM 1.03</div></div>
</article>
<hr class="card-divider" />

<article class="karm-card" id="dual-turbolaser-turrets-turbolaser" data-name="dual turbolaser turrets" data-factions="" data-category="upgrades" data-type="turbolaser">
  <div class="card-top">
    <div class="card-image-wrap"><img class="card-image" src="https://images.swarmada.wiki/images/dual-turbolaser-turrets.webp" alt="Dual Turbolaser Turrets" /></div>
    <div class="card-main">
      <h2 class="card-title">Dual Turbolaser Turrets <span class="icon-font"> D</span></h2>
      <div class="top-summary">
<div class="top-summary-block">
  <div class="top-summary-label">Card Text</div>
  <div class="top-summary-text"><p><em>Modification</em>.</p><p>While attacking you may exhaust this card to add 1 red die to your attack pool. If you do, remove 1 die from the attack pool.</p></div>
</div>
<div class="top-summary-block">
  <div class="top-summary-label">Timing</div>
  <div class="top-summary-text">This Upgrade Card may be resolved during the &#39;Resolve Attack Effects&#39; step.</div>
</div></div>
    </div>
  </div>
  <div class="card-bottom card-rulings">
<div class="ruling-section">
  <h3 class="ruling-heading">Clarifications</h3>
  <div class="ruling-content"><ul><li>While you are resolving this Upgrade Card&#39;s effect, you cannot resolve other effects that modify dice until you have completely resolved this Upgrade Card&#39;s effect. <span class="footnote-ref">[1]</span></li><li>If this Upgrade Card is resolved during a Salvo attack, you will not be able to add 1 red die, as you cannot add dice to Salvo attacks. You will, however, be required to choose and cancel one attack die. <span class="footnote-ref">[1]</span></li></ul></div>
</div></div>
  <div class="ruling-footnotes"><div>[1] ARC | 2025-07-11 | ARM 1.03</div></div>
</article>
<hr class="card-divider" />

<article class="karm-card" id="enhanced-armament-turbolaser" data-name="enhanced armament" data-factions="" data-category="upgrades" data-type="turbolaser">
  <div class="card-top">
    <div class="card-image-wrap"><img class="card-image" src="https://images.swarmada.wiki/images/enhanced-armament.webp" alt="Enhanced Armament" /></div>
    <div class="card-main">
      <h2 class="card-title">Enhanced Armament <span class="icon-font"> D</span></h2>
      <div class="top-summary">
<div class="top-summary-block">
  <div class="top-summary-label">Card Text</div>
  <div class="top-summary-text"><p><em>Modification</em>.</p><p>The battery armaments for your left and right hull zones are increased by 1 red die.</p></div>
</div>
<div class="top-summary-block">
  <div class="top-summary-label">Timing</div>
  <div class="top-summary-text">This Upgrade Card is always active, unless it is discarded.</div>
</div></div>
    </div>
  </div>
  <div class="card-bottom card-rulings">
<div class="ruling-section">
  <h3 class="ruling-heading">Clarifications</h3>
  <div class="ruling-content"><ul><li>A ship equipped with this Upgrade Card has its left and right hull zones&#39; battery armament permanently increased by 1 red die. Therefore, this added die is part of the initial attack pool. <span class="footnote-ref">[1]</span></li><li>This card ability only increases the &#39;Left&#39; and &#39;Right&#39; hull zones of a ship&#39;s battery armament. A Super Star Destroyer&#39;s &#39;Auxiliary Left&#39; and &#39;Auxiliary Right&#39; hull zones do not qualify. <span class="footnote-ref">[1]</span></li><li>Battery armament is used when attacking a ship; this Upgrade Card does not increase anti squadron armament. <span class="footnote-ref">[1]</span></li></ul></div>
</div>

<div class="ruling-section">
  <h3 class="ruling-heading">Objective Interactions</h3>
  <div class="ruling-content"><ul><li>These added dice can be used to claim Fire Lanes objective tokens, as they are considered part of the ship&#39;s battery armament. <span class="footnote-ref">[1]</span></li></ul></div>
</div></div>
  <div class="ruling-footnotes"><div>[1] ARC | 2025-07-11 | ARM 1.03</div></div>
</article>
<hr class="card-divider" />

<article class="karm-card" id="h9-turbolasers-turbolaser" data-name="h9 turbolasers" data-factions="" data-category="upgrades" data-type="turbolaser">
  <div class="card-top">
    <div class="card-image-wrap"><img class="card-image" src="https://images.swarmada.wiki/images/h9-turbolasers.webp" alt="H9 Turbolasers" /></div>
    <div class="card-main">
      <h2 class="card-title">H9 Turbolasers <span class="icon-font"> D</span></h2>
      <div class="top-summary">
<div class="top-summary-block">
  <div class="top-summary-label">Card Text</div>
  <div class="top-summary-text"><p><em>Modification</em>.</p><p>While attacking, you may change 1 die face with a <span class="icon-font">S</span> or <span class="icon-font">T</span> icon to a face with an <span class="icon-font">U</span> icon.</p></div>
</div>
<div class="top-summary-block">
  <div class="top-summary-label">Timing</div>
  <div class="top-summary-text">This Upgrade Card may be resolved during the &#39;Resolve Attack Effects&#39; step.</div>
</div></div>
    </div>
  </div>
  <div class="card-bottom card-rulings">
<div class="ruling-section">
  <h3 class="ruling-heading">Clarifications</h3>
  <div class="ruling-content"><ul><li>This effect cannot be used on black dice, as they have no accuracy icon. <span class="footnote-ref">[1]</span></li></ul></div>
</div></div>
  <div class="ruling-footnotes"><div>[1] ARC | 2025-07-11 | ARM 1.03</div></div>
</article>
<hr class="card-divider" />

<article class="karm-card" id="heavy-fire-zone-turbolaser" data-name="heavy fire zone" data-factions="" data-category="upgrades" data-type="turbolaser">
  <div class="card-top">
    <div class="card-image-wrap"><img class="card-image" src="https://images.swarmada.wiki/images/heavy-fire-zone.webp" alt="Heavy Fire Zone" /></div>
    <div class="card-main">
      <h2 class="card-title">Heavy Fire Zone <span class="icon-font"> D</span></h2>
      <div class="top-summary">
<div class="top-summary-block">
  <div class="top-summary-label">Card Text</div>
  <div class="top-summary-text"><p>While attacking a squadron, before you gather dice, if the defender is not engaged with a friendly squadron you may replace all of the blue dice in your anti-squadron armament with red dice.</p></div>
</div>
<div class="top-summary-block">
  <div class="top-summary-label">Timing</div>
  <div class="top-summary-text">This Upgrade Card may be resolved during the &#39;Declare Targets&#39; step.</div>
</div></div>
    </div>
  </div>
  <div class="card-bottom card-rulings">
<div class="ruling-section">
  <h3 class="ruling-heading">Clarifications</h3>
  <div class="ruling-content"><ul><li>When a ship equipped with this Upgrade Card declares an enemy squadron as the target of an attack, if that squadron is not engaged with a friendly squadron, before moving on to the &#39;Roll Attack Dice&#39; step you may replace all blue dice in that ship&#39;s anti squadron armament with red dice. This allows antisquadron attacks at long range. <span class="footnote-ref">[1]</span></li><li>Ships may use this Upgrade Card effect to attack proximity mines; proximity mines cannot be &#39;engaged&#39; by squadrons. <span class="footnote-ref">[1]</span></li></ul></div>
</div>

<div class="ruling-section">
  <h3 class="ruling-heading">Upgrade Interactions</h3>
  <div class="ruling-content"><ul><li>A ship with Quad Laser Turrets equipped and this Upgrade Card has an anti-squadron armament of 1 blue die during Counter attacks and would be able to replace it with a red die. <span class="footnote-ref">[1]</span></li><li>Targets at distance 1 of Instigator may still be affected by this Upgrade Card, as they are not engaged with any friendly squadrons. <span class="footnote-ref">[1]</span></li></ul></div>
</div></div>
  <div class="ruling-footnotes"><div>[1] ARC | 2025-07-11 | ARM 1.03</div></div>
</article>
<hr class="card-divider" />

<article class="karm-card" id="heavy-turbolaser-turrets-turbolaser" data-name="heavy turbolaser turrets" data-factions="" data-category="upgrades" data-type="turbolaser">
  <div class="card-top">
    <div class="card-image-wrap"><img class="card-image" src="https://images.swarmada.wiki/images/heavy-turbolaser-turrets.webp" alt="Heavy Turbolaser Turrets" /></div>
    <div class="card-main">
      <h2 class="card-title">Heavy Turbolaser Turrets <span class="icon-font"> D</span></h2>
      <div class="top-summary">
<div class="top-summary-block">
  <div class="top-summary-label">Card Text</div>
  <div class="top-summary-text"><p>While attacking, the <span class="icon-font">3</span> defense effect cannot reduce the damage total by more than 1 unless it is the only defense token spent by the defender during the attack.</p></div>
</div>
<div class="top-summary-block">
  <div class="top-summary-label">Timing</div>
  <div class="top-summary-text">This Upgrade Card may be resolved during the &#39;Resolve Damage&#39; step.</div>
</div></div>
    </div>
  </div>
  <div class="card-bottom card-rulings">
<div class="ruling-section">
  <h3 class="ruling-heading">Clarifications</h3>
  <div class="ruling-content"><ul><li>When attacking a target, if the defender spends a Brace defense token and also spends another defense token, the total damage that can be reduced by Brace cannot be more than &#39;1&#39;. <span class="footnote-ref">[1]</span></li></ul></div>
</div>

<div class="ruling-section">
  <h3 class="ruling-heading">Upgrade Interactions</h3>
  <div class="ruling-content"><ul><li>Effects such as Commander Kyrsta Agate or Admonition allow tokens to be discarded rather than spent. However this Upgrade Card states that a brace must be spent in order for the Brace effect to reduce damage by more than 1. <span class="footnote-ref">[1]</span></li><li>If a Brace was spent and another token discarded via Agate, the full damage reduction from the Brace defense effect would apply - the defender spent a Brace defense token, and it was the only token spent during this attack. <span class="footnote-ref">[1]</span></li><li>If another token was spent and the Brace was discarded via Agate, then the Brace effect would only reduce damage by 1. The defender spent a defense token other than Brace, and so the Brace defense effect would be limited by this Upgrade Card&#39;s effect. <span class="footnote-ref">[1]</span></li></ul></div>
</div></div>
  <div class="ruling-footnotes"><div>[1] ARC | 2025-07-11 | ARM 1.03</div></div>
</article>
<hr class="card-divider" />

<article class="karm-card" id="linked-turbolaser-towers-turbolaser" data-name="linked turbolaser towers" data-factions="" data-category="upgrades" data-type="turbolaser">
  <div class="card-top">
    <div class="card-image-wrap"><img class="card-image" src="https://images.swarmada.wiki/images/linked-turbolaser-towers.webp" alt="Linked Turbolaser Towers" /></div>
    <div class="card-main">
      <h2 class="card-title">Linked Turbolaser Towers <span class="icon-font"> D</span></h2>
      <div class="top-summary">
<div class="top-summary-block">
  <div class="top-summary-label">Card Text</div>
  <div class="top-summary-text"><p>While attacking a squadron, you may reroll 1 red die in your attack pool.</p><p>While attacking a ship, if you have the bombard tag, you may reroll 1 red die in your attack pool.</p><p>During your activation, while attacking the first squadron during an attack, you may exhaust this card to add 2 dice of any color to your attack pool. If you do, you cannot declare additional squadron targets for this attack.</p></div>
</div>
<div class="top-summary-block">
  <div class="top-summary-label">Timing</div>
  <div class="top-summary-text">This Upgrade Card may be resolved during the &#39;Resolve Attack Effects&#39; step.</div>
</div></div>
    </div>
  </div>
  <div class="card-bottom card-rulings">
<div class="ruling-section">
  <h3 class="ruling-heading">Clarifications</h3>
  <div class="ruling-content"><ul><li>Both dice added must be of the same color. <span class="footnote-ref">[1]</span></li><li>The reroll effect may be resolved even when this Upgrade Card is exhausted. <span class="footnote-ref">[1]</span></li><li>A ship equipped with this Upgrade Card can resolve the &#39;add dice&#39; effect during any of its attacks but, because the card will exhaust, can only resolve it once during its activation. If the ship resolves this effect during an additional attack granted by another effect, such as the Ordnance Pods upgrade card, it cannot declare additional squadron targets during that attack. <span class="footnote-ref">[1]</span></li><li>This Upgrade Card&#39;s add dice effect may be used on a proximity mine token as it is treated as a squadron during an attack. <span class="footnote-ref">[1]</span></li></ul></div>
</div>

<div class="ruling-section">
  <h3 class="ruling-heading">Upgrade Interactions</h3>
  <div class="ruling-content"><ul><li>If you attack a squadron using this Upgrade Card&#39;s add dice effect, and are also equipped with Gunnery Team, you may choose to conduct your second attack from the same hullzone at other squadrons in arc/range but not the first squadron (due to Gunnery Team&#39;s restriction on attacking the same target). <span class="footnote-ref">[1]</span></li><li>This Upgrade Card&#39;s add dice effect cannot be used on a Quad Laser Turrets or Salvo attack, as it is not &#39;your activation&#39; (that ship&#39;s activation). This is in addition to the prohibition against adding dice to a Salvo attack. <span class="footnote-ref">[1]</span></li></ul></div>
</div></div>
  <div class="ruling-footnotes"><div>[1] ARC | 2025-07-11 | ARM 1.03</div></div>
</article>
<hr class="card-divider" />

<article class="karm-card" id="quad-battery-turrets-turbolaser" data-name="quad battery turrets" data-factions="" data-category="upgrades" data-type="turbolaser">
  <div class="card-top">
    <div class="card-image-wrap"><img class="card-image" src="https://images.swarmada.wiki/images/quad-battery-turrets.webp" alt="Quad Battery Turrets" /></div>
    <div class="card-main">
      <h2 class="card-title">Quad Battery Turrets <span class="icon-font"> D</span></h2>
      <div class="top-summary">
<div class="top-summary-block">
  <div class="top-summary-label">Card Text</div>
  <div class="top-summary-text"><p><em>Modification</em>.</p><p>While attacking a ship with a higher speed than yours, you may add 1 blue die to your attack pool.</p></div>
</div>
<div class="top-summary-block">
  <div class="top-summary-label">Timing</div>
  <div class="top-summary-text">This Upgrade Card may be resolved during the &#39;Resolve Attack Effects&#39; step.</div>
</div></div>
    </div>
  </div>
  <div class="card-bottom card-rulings">
<div class="ruling-section">
  <h3 class="ruling-heading">Clarifications</h3>
  <div class="ruling-content"><ul><li>This die can be added to an attack targeting a ship, regardless of distance, if the requirements are met. <span class="footnote-ref">[1]</span></li><li>This Upgrade Card&#39;s effect is based on a ship&#39;s speed as shown on its speed dial. Temporary speed changes (such as those due to the G8 Experimental Projector or the Gravity Rift obstacle) will not allow this Upgrade Card to trigger. <span class="footnote-ref">[1]</span></li></ul></div>
</div></div>
  <div class="ruling-footnotes"><div>[1] ARC | 2025-07-11 | ARM 1.03</div></div>
</article>
<hr class="card-divider" />

<article class="karm-card" id="quad-turbolaser-cannons-turbolaser" data-name="quad turbolaser cannons" data-factions="" data-category="upgrades" data-type="turbolaser">
  <div class="card-top">
    <div class="card-image-wrap"><img class="card-image" src="https://images.swarmada.wiki/images/quad-turbolaser-cannons.webp" alt="Quad Turbolaser Cannons" /></div>
    <div class="card-main">
      <h2 class="card-title">Quad Turbolaser Cannons <span class="icon-font"> D</span></h2>
      <div class="top-summary">
<div class="top-summary-block">
  <div class="top-summary-label">Card Text</div>
  <div class="top-summary-text"><p><em>Modification</em>.</p><p>While attacking, if at least 1 red die face has an <span class="icon-font">U</span> icon, add 1 red die set to the <span class="icon-font">U</span> icon to your attack pool.</p></div>
</div>
<div class="top-summary-block">
  <div class="top-summary-label">Timing</div>
  <div class="top-summary-text">This Upgrade Card may be resolved during the &#39;Resolve Attack Effects&#39; step.</div>
</div></div>
    </div>
  </div>
  <div class="card-bottom card-rulings">
<div class="ruling-section">
  <h3 class="ruling-heading">Clarifications</h3>
  <div class="ruling-content"><ul><li>This effect can trigger at any point during the &#39;Resolve Attack Effects&#39; step. If the initial attack pool roll does not have a red die with an accuracy, a red die can be modified with a card ability (such as Home One) which will then allow this Upgrade Card&#39;s effect to trigger. <span class="footnote-ref">[1]</span></li></ul></div>
</div>

<div class="ruling-section">
  <h3 class="ruling-heading">Objective Interactions</h3>
  <div class="ruling-content"><ul><li>The objective Solar Corona may remove the only red die showing an Accuracy icon in the pool. This would happen &#39;before resolving any attack effects&#39;, and thus this Upgrade Card would not be able to trigger. <span class="footnote-ref">[1]</span></li></ul></div>
</div></div>
  <div class="ruling-footnotes"><div>[1] ARC | 2025-07-11 | ARM 1.03</div></div>
</article>
<hr class="card-divider" />

<article class="karm-card" id="slaved-turrets-turbolaser" data-name="slaved turrets" data-factions="" data-category="upgrades" data-type="turbolaser">
  <div class="card-top">
    <div class="card-image-wrap"><img class="card-image" src="https://images.swarmada.wiki/images/slaved-turrets.webp" alt="Slaved Turrets" /></div>
    <div class="card-main">
      <h2 class="card-title">Slaved Turrets <span class="icon-font"> D</span></h2>
      <div class="top-summary">
<div class="top-summary-block">
  <div class="top-summary-label">Card Text</div>
  <div class="top-summary-text"><p><em>Modification</em>.</p><p>You cannot attack more than once per round. While attacking a ship, add 1 red die to your attack pool.</p></div>
</div>
<div class="top-summary-block">
  <div class="top-summary-label">Timing</div>
  <div class="top-summary-text">This Upgrade Card may be resolved during the &#39;Resolve Attack Effects&#39; step.</div>
</div></div>
    </div>
  </div>
  <div class="card-bottom card-rulings">
<div class="ruling-section">
  <h3 class="ruling-heading">Clarifications</h3>
  <div class="ruling-content"><ul><li>If a ship equipped with this Upgrade Card targets squadrons with its single attack, it can attack all squadrons within that chosen hull zone&#39;s arc and range. <span class="footnote-ref">[1]</span></li></ul></div>
</div>

<div class="ruling-section">
  <h3 class="ruling-heading">Upgrade Interactions</h3>
  <div class="ruling-content"><ul><li>The &#39;cannot attack more than once per round&#39; is absolute. A ship equipped with this Upgrade Card can still only attack once even if it is equipped with Gunnery Team or is the objective ship in Advanced Gunnery. <span class="footnote-ref">[1]</span></li><li>Counter and Salvo both count as an attack. A ship equipped with this Upgrade Card and Quad Laser Turrets, if it chooses to Counter a squadron attack, would not be able to attack on its activation. If it attacked on its activation it would be unable to Counter a subsequent squadron attack. <span class="footnote-ref">[1]</span></li><li>A ship equipped with this Upgrade Card would be unable to trigger Ordnance Pods if it had previously attacked during the round. <span class="footnote-ref">[1]</span></li></ul></div>
</div></div>
  <div class="ruling-footnotes"><div>[1] ARC | 2025-07-11 | ARM 1.03</div></div>
</article>
<hr class="card-divider" />

<article class="karm-card" id="spinal-armament-turbolaser" data-name="spinal armament" data-factions="" data-category="upgrades" data-type="turbolaser">
  <div class="card-top">
    <div class="card-image-wrap"><img class="card-image" src="https://images.swarmada.wiki/images/spinal-armament.webp" alt="Spinal Armament" /></div>
    <div class="card-main">
      <h2 class="card-title">Spinal Armament <span class="icon-font"> D</span></h2>
      <div class="top-summary">
<div class="top-summary-block">
  <div class="top-summary-label">Card Text</div>
  <div class="top-summary-text"><p><em>Modification</em>.</p><p>The battery armaments for your front and rear hull zones are increased by 1 red die.</p></div>
</div>
<div class="top-summary-block">
  <div class="top-summary-label">Timing</div>
  <div class="top-summary-text">This Upgrade Card is always active, unless it is discarded.</div>
</div></div>
    </div>
  </div>
  <div class="card-bottom card-rulings">
<div class="ruling-section">
  <h3 class="ruling-heading">Clarifications</h3>
  <div class="ruling-content"><ul><li>This Upgrade Card does not add a die to a Salvo attack, as it does not change the printed armament on the ship card. <span class="footnote-ref">[1]</span></li><li>A ship equipped with this Upgrade Card has its front and rear hull zones&#39; battery armament permanently increased by 1 red die. This die is part of the initial attack pool. <span class="footnote-ref">[1]</span></li><li>Battery armament is used when attacking a ship; this Upgrade Card does not increase anti squadron armament. <span class="footnote-ref">[1]</span></li></ul></div>
</div>

<div class="ruling-section">
  <h3 class="ruling-heading">Objective Interactions</h3>
  <div class="ruling-content"><ul><li>These dice can be used to claim Fire Lanes objective tokens, as they are considered part of the ship&#39;s battery armament. <span class="footnote-ref">[1]</span></li></ul></div>
</div></div>
  <div class="ruling-footnotes"><div>[1] ARC | 2025-07-11 | ARM 1.03</div></div>
</article>
<hr class="card-divider" />

<article class="karm-card" id="swivel-mount-batteries-turbolaser" data-name="swivel-mount batteries" data-factions="republic,separatist" data-category="upgrades" data-type="turbolaser">
  <div class="card-top">
    <div class="card-image-wrap"><img class="card-image" src="https://images.swarmada.wiki/images/swivel-mount-batteries.webp" alt="Swivel-Mount Batteries" /></div>
    <div class="card-main">
      <h2 class="card-title">Swivel-Mount Batteries <span class="icon-font">|</span><span class="icon-font">}</span> <span class="icon-font"> D</span></h2>
      <div class="top-summary">
<div class="top-summary-block">
  <div class="top-summary-label">Card Text</div>
  <div class="top-summary-text"><p><em>Modification</em>.</p><p>When you reveal a command, you may exhaust this card to choose 1 of your hull zones and mark it with a focus token. While attacking a ship from that hull zone, add 1 die of any color from an adjacent hull zone&#39;s armament to your attack pool. While attacking from adjacent hull zones, remove 1 die from your attack pool. When you ready this card, remove that focus token.</p></div>
</div>
<div class="top-summary-block">
  <div class="top-summary-label">Timing</div>
  <div class="top-summary-text">This Upgrade Card resolves in several stages. The first part takes place when you reveal a command; at this time you mark a hull zone with a Focus token. The second part takes place while attacking, depending on the hull zone conducting the attack. A die is added during the &#39;Resolve Attack Effects&#39; step, while a die is removed after gathering the attack pool but before rolling.</div>
</div></div>
    </div>
  </div>
  <div class="card-bottom card-rulings">
<div class="ruling-section">
  <h3 class="ruling-heading">Clarifications</h3>
  <div class="ruling-content"><ul><li>If you do not reveal a command dial, you cannot exhaust this Upgrade Card nor place a Focus token. <span class="footnote-ref">[1]</span></li><li>When this ship is attacking another ship from a hull zone marked with a Focus token, during the &#39;Resolve Attack Effects&#39; step, you can add 1 die of a color that is present in an adjacent hull zone&#39;s battery armament to your attack pool. <span class="footnote-ref">[1]</span></li><li>For example, a black die could be chosen to be added to an attack, regardless of range, if that die is in an adjacent hull zone&#39;s battery armament. <span class="footnote-ref">[1]</span></li><li>When this ship is attacking another ship or squadron from a hull zone adjacent to the hull zone with a Focus token, after you gather dice but before rolling your initial attack pool, remove 1 die. This includes any attacks made by card effects such as Ordnance Pods or Quad Laser Turrets if you choose to use the effect from a hull zone adjacent to one with the Focus token. Because this die is removed before the attack pool is rolled, an attack consisting of a single die will be cancelled. <span class="footnote-ref">[1]</span></li><li>Salvo attacks from a hull zone adjacent to a hull zone with a Focus token must have a die removed as well, as they originate from the defending hull zone. <span class="footnote-ref">[1]</span></li></ul></div>
</div>

<div class="ruling-section">
  <h3 class="ruling-heading">Upgrade Interactions</h3>
  <div class="ruling-content"><ul><li>Dice added by an upgrade card that increases battery armament in a hull zone are eligible to be added to an adjacent hull zone via a Focus token. <span class="footnote-ref">[1]</span></li></ul></div>
</div></div>
  <div class="ruling-footnotes"><div>[1] ARC | 2025-07-11 | ARM 1.03</div></div>
</article>
<hr class="card-divider" />

<article class="karm-card" id="turbolaser-reroute-circuits-turbolaser" data-name="turbolaser reroute circuits" data-factions="" data-category="upgrades" data-type="turbolaser">
  <div class="card-top">
    <div class="card-image-wrap"><img class="card-image" src="https://images.swarmada.wiki/images/turbolaser-reroute-circuits.webp" alt="Turbolaser Reroute Circuits" /></div>
    <div class="card-main">
      <h2 class="card-title">Turbolaser Reroute Circuits <span class="icon-font"> D</span></h2>
      <div class="top-summary">
<div class="top-summary-block">
  <div class="top-summary-label">Card Text</div>
  <div class="top-summary-text"><p>While attacking, you may exhaust this card and spend 1 <span class="icon-font">4</span> defense token to change 1 red die to a face with a <span class="icon-font">T</span> icon or 2 <span class="icon-font">S</span> icons.</p></div>
</div>
<div class="top-summary-block">
  <div class="top-summary-label">Timing</div>
  <div class="top-summary-text">This Upgrade Card may be resolved during the &#39;Resolve Attack Effects&#39; step.</div>
</div></div>
    </div>
  </div>
  <div class="card-bottom card-rulings">
<div class="ruling-section">
  <h3 class="ruling-heading">Clarifications</h3>
  <div class="ruling-content"><ul><li>This Upgrade Card can be used even if the ship is at speed 0. <span class="footnote-ref">[1]</span></li><li>If a ship equipped with this Upgrade Card also has the faceup damage card Faulty Countermeasures, you cannot spend and discard exhausted Evade defense tokens to resolve this Upgrade Card&#39;s effect. You would only be eligible to spend readied Evade defense tokens. <span class="footnote-ref">[1]</span></li></ul></div>
</div></div>
  <div class="ruling-footnotes"><div>[1] ARC | 2025-07-11 | ARM 1.03</div></div>
</article>
<hr class="card-divider" />

<article class="karm-card" id="xi7-turbolasers-turbolaser" data-name="xi7 turbolasers" data-factions="" data-category="upgrades" data-type="turbolaser">
  <div class="card-top">
    <div class="card-image-wrap"><img class="card-image" src="https://images.swarmada.wiki/images/xi7-turbolasers.webp" alt="XI7 Turbolasers" /></div>
    <div class="card-main">
      <h2 class="card-title">XI7 Turbolasers <span class="icon-font"> D</span></h2>
      <div class="top-summary">
<div class="top-summary-block">
  <div class="top-summary-label">Card Text</div>
  <div class="top-summary-text"><p>While attacking, if the defender spends a <span class="icon-font">2</span> token, it cannot suffer more than 1 damage on each hull zone other than the defending hull zone when it resolves the <span class="icon-font">2</span> defense effect.</p></div>
</div>
<div class="top-summary-block">
  <div class="top-summary-label">Timing</div>
  <div class="top-summary-text">This Upgrade Card may be resolved during the &#39;Resolve Damage&#39; step.</div>
</div></div>
    </div>
  </div>
  <div class="card-bottom card-rulings">
<div class="ruling-section">
  <h3 class="ruling-heading">Upgrade Interactions</h3>
  <div class="ruling-content"><ul><li>Commander Kyrsta Agate&#39;s effect &#39;discards&#39; a defense token rather than &#39;spends&#39; it. If a ship equipped with Commander Kyrsta Agate discards a redirect token, the effects of the XI7 Turbolasers would be bypassed. <span class="footnote-ref">[1]</span></li><li>If the defender has Advanced Projectors, this Upgrade Card prevents more than one damage on each hull zone other than the defending hull zone. An example is given: an attack dealing five damage could result in one damage to each other hull zone and two damage to the original defending hull zone. <span class="footnote-ref">[1]</span></li><li>Cards with critical effects causing damage to adjacent hull zones (e.g., Assault Concussion Missiles or Superheavy Composite Beam Turbolasers) do not interact with this Upgrade Card. The redirect defense effect is resolved after damage is applied to adjacent hull zones from the critical effect. <span class="footnote-ref">[1]</span></li></ul></div>
</div></div>
  <div class="ruling-footnotes"><div>[1] ARC | 2025-07-11 | ARM 1.03</div></div>
</article>
<hr class="card-divider" />

<article class="karm-card" id="xx-9-turbolasers-turbolaser" data-name="xx-9 turbolasers" data-factions="" data-category="upgrades" data-type="turbolaser">
  <div class="card-top">
    <div class="card-image-wrap"><img class="card-image" src="https://images.swarmada.wiki/images/xx-9-turbolasers.webp" alt="XX-9 Turbolasers" /></div>
    <div class="card-main">
      <h2 class="card-title">XX-9 Turbolasers <span class="icon-font"> D</span></h2>
      <div class="top-summary">
<div class="top-summary-block">
  <div class="top-summary-label">Card Text</div>
  <div class="top-summary-text"><p><span class="icon-font">T</span>: The first 2 damage cards dealt to the defender by this attack are dealt faceup.</p></div>
</div>
<div class="top-summary-block">
  <div class="top-summary-label">Timing</div>
  <div class="top-summary-text">This Upgrade Card may be resolved during the &#39;Resolve Attack Effects&#39; step.</div>
</div></div>
    </div>
  </div>
  <div class="card-bottom card-rulings">
<div class="ruling-section">
  <h3 class="ruling-heading">Clarifications</h3>
  <div class="ruling-content"><ul><li>If the first damage card dealt by this Upgrade Card&#39;s effect is Structural Damage, the additional card dealt by Structural Damage would not be dealt faceup. However, if another damage card is dealt due to the defender suffering hull damage, that card would be dealt faceup due to this Upgrade Card&#39;s effect. <span class="footnote-ref">[1]</span></li></ul></div>
</div>

<div class="ruling-section">
  <h3 class="ruling-heading">Upgrade Interactions</h3>
  <div class="ruling-content"><ul><li>General Dodonna resolves once for each faceup damage card dealt. If two face-up damage cards are dealt, the player draws four cards once (Dodonna chooses one), and then draws four cards a second time (Dodonna chooses another). <span class="footnote-ref">[1]</span></li><li>If a ship with Fire Control Team resolves both this Upgrade Card&#39;s critical effect and the standard critical effect, only the first 2 damage cards will be faceup. <span class="footnote-ref">[1]</span></li><li>If a ship with Fire Control Team resolves the critical effects of both this Upgrade Card and Assault Proton Torpedoes, the damage card from Assault Proton Torpedoes is the &#39;first&#39; faceup damage card. If additional hull damage is dealt, it would be the &#39;second&#39; faceup damage card due to this Upgrade Card. Only two critical damage cards would be dealt faceup in total. <span class="footnote-ref">[1]</span></li></ul></div>
</div></div>
  <div class="ruling-footnotes"><div>[1] ARC | 2025-07-11 | ARM 1.03</div></div>
</article>
<hr class="card-divider" />

<article class="karm-card karm-header-card" id="header-nexus-upgrades" data-category="header">
  <div class="section-header-title">Nexus Upgrades </div>
</article>

<article class="karm-card karm-header-card" id="header-turbolaser-2" data-category="header">
  <div class="section-header-title">Turbolaser <span class="icon-font">D</span></div>
</article>

<article class="karm-card" id="ag-2g-quad-laser-cannons-turbolaser" data-name="ag-2g quad laser cannons" data-factions="" data-category="nexus-upgrades" data-type="turbolaser">
  <div class="card-top">
    <div class="card-image-wrap"><img class="card-image" src="https://images.swarmada.wiki/images/ag-2g-quad-laser-cannons-nexus.webp" alt="AG-2G Quad Laser Cannons" /></div>
    <div class="card-main">
      <h2 class="card-title">AG-2G Quad Laser Cannons <span class="icon-font"> D</span></h2>
      <div class="top-summary">
<div class="top-summary-block">
  <div class="top-summary-label">Card Text</div>
  <div class="top-summary-text"><p>While performing a non-IGNITION attack against a ship, during the Spend Defense Tokens step, if a die would be removed from the attack pool, the defender must choose to keep or reroll that die instead.</p></div>
</div></div>
    </div>
  </div>
  <div class="card-bottom card-rulings"></div>
  
</article>
<hr class="card-divider" />

<article class="karm-card" id="precision-turbolaser-turrets-turbolaser" data-name="precision turbolaser turrets" data-factions="empire" data-category="nexus-upgrades" data-type="turbolaser">
  <div class="card-top">
    <div class="card-image-wrap"><img class="card-image" src="https://images.swarmada.wiki/images/precision-turbolaser-turrets-nexus.webp" alt="Precision Turbolaser Turrets" /></div>
    <div class="card-main">
      <h2 class="card-title">Precision Turbolaser Turrets <span class="icon-font">\</span> <span class="icon-font"> D</span></h2>
      <div class="top-summary">
<div class="top-summary-block">
  <div class="top-summary-label">Card Text</div>
  <div class="top-summary-text"><p>While performing a non-IGNITION attack against a ship, during the Spend Defense Tokens step, if a die would be removed from the attack pool, the defender must choose to keep or reroll that die instead.</p></div>
</div></div>
    </div>
  </div>
  <div class="card-bottom card-rulings"></div>
  
</article>
<hr class="card-divider" />

<article class="karm-card" id="tibanna-disruptors-turbolaser" data-name="tibanna disruptors" data-factions="scum" data-category="nexus-upgrades" data-type="turbolaser">
  <div class="card-top">
    <div class="card-image-wrap"><img class="card-image" src="https://images.swarmada.wiki/images/tibanna-disruptors-scum-nexus.webp" alt="Tibanna Disruptors" /></div>
    <div class="card-main">
      <h2 class="card-title">Tibanna Disruptors <span class="icon-font">{</span> <span class="icon-font"> D</span></h2>
      <div class="top-summary">
<div class="top-summary-block">
  <div class="top-summary-label">Card Text</div>
  <div class="top-summary-text"><p><strong>RED <span class="icon-font">T</span></strong>: Look at the top 2 damage cards of the defender&#39;s damage deck. Deal 1 of them faceup to the defender and discard the other. Then suffer 1 damage.</p></div>
</div></div>
    </div>
  </div>
  <div class="card-bottom card-rulings"></div>
  
</article></div>
      
    </div>
    
    <script>
(function () {
  var searchInput = document.getElementById('karm-search-input');
  var filtersContainer = document.getElementById('karm-faction-filters');
  var noResults = document.getElementById('karm-no-results');
  var resultCount = document.getElementById('karm-result-count');
  if (!searchInput || !filtersContainer) return;

  var factionBtns = filtersContainer.querySelectorAll('.faction-btn[data-faction]');
  var allBtn = filtersContainer.querySelector('.faction-btn[data-faction="all"]');
  var factionKeys = ['rebel', 'empire', 'republic', 'separatist', 'neutral', 'new-republic', 'scum'];
  var activeFactions = new Set(factionKeys);

  function syncAllBtn() {
    if (allBtn) {
      if (activeFactions.size === factionKeys.length) {
        allBtn.classList.add('active');
      } else {
        allBtn.classList.remove('active');
      }
    }
  }

  function applyFilters() {
    var query = (searchInput.value || '').toLowerCase().trim();
    var cards = document.querySelectorAll('.karm-card');
    var dividers = document.querySelectorAll('.card-divider');
    var visibleCount = 0;
    var lastHeaderIdx = -1;
    var cardsAfterHeader = 0;
    var headerElements = [];
    var allFactions = activeFactions.size === factionKeys.length;

    for (var i = 0; i < cards.length; i++) {
      var card = cards[i];
      var isHeader = card.getAttribute('data-category') === 'header';

      if (isHeader) {
        if (lastHeaderIdx >= 0) {
          cards[lastHeaderIdx].classList.toggle('filtered-out', cardsAfterHeader === 0);
        }
        lastHeaderIdx = i;
        cardsAfterHeader = 0;
        continue;
      }

      var name = card.getAttribute('data-name') || '';
      var factions = (card.getAttribute('data-factions') || '').split(',').filter(Boolean);

      var matchesSearch = !query || name.indexOf(query) !== -1;
      var matchesFaction = allFactions || factions.length === 0 || factions.some(function (f) { return activeFactions.has(f.toLowerCase()); });
      var visible = matchesSearch && matchesFaction;

      card.classList.toggle('filtered-out', !visible);
      if (visible) {
        visibleCount++;
        cardsAfterHeader++;
      }
    }

    if (lastHeaderIdx >= 0) {
      cards[lastHeaderIdx].classList.toggle('filtered-out', cardsAfterHeader === 0);
    }

    for (var d = 0; d < dividers.length; d++) {
      var hr = dividers[d];
      var prev = hr.previousElementSibling;
      var next = hr.nextElementSibling;
      var hideDivider = (!prev || prev.classList.contains('filtered-out')) ||
                        (!next || next.classList.contains('filtered-out'));
      hr.classList.toggle('filtered-out', hideDivider);
    }

    if (noResults) {
      noResults.classList.toggle('visible', visibleCount === 0 && (query || !allFactions));
    }
    if (resultCount) {
      if (query || !allFactions) {
        resultCount.textContent = visibleCount + ' card' + (visibleCount !== 1 ? 's' : '') + ' found';
        resultCount.style.display = '';
      } else {
        resultCount.textContent = '';
        resultCount.style.display = 'none';
      }
    }
  }

  searchInput.addEventListener('input', applyFilters);

  filtersContainer.addEventListener('click', function (e) {
    var btn = e.target.closest('.faction-btn');
    if (!btn) return;
    var faction = btn.getAttribute('data-faction');

    if (faction === 'all') {
      if (activeFactions.size === factionKeys.length) {
        activeFactions.clear();
        factionBtns.forEach(function (b) { b.classList.remove('active'); });
      } else {
        factionKeys.forEach(function (f) { activeFactions.add(f); });
        factionBtns.forEach(function (b) { b.classList.add('active'); });
      }
    } else {
      if (activeFactions.has(faction)) {
        activeFactions.delete(faction);
        btn.classList.remove('active');
      } else {
        activeFactions.add(faction);
        btn.classList.add('active');
      }
    }
    syncAllBtn();
    applyFilters();
  });

  searchInput.addEventListener('keydown', function (e) {
    if (e.key === 'Escape') {
      searchInput.value = '';
      applyFilters();
    }
  });
})();
</script>
    <script>
(function () {
  document.addEventListener('click', function (e) {
    var btn = e.target.closest('.arc-points-toggle');
    if (!btn) return;
    var cardId = btn.getAttribute('data-card-id');
    if (!cardId) return;
    var article = document.getElementById(cardId);
    if (!article) return;
    var img = article.querySelector('img.card-image[data-arc-image]');
    if (!img) return;
    var baseImage = img.getAttribute('data-base-image');
    var arcImage = img.getAttribute('data-arc-image');
    if (!baseImage || !arcImage) return;
    var isArc = btn.classList.contains('arc-active');
    if (isArc) {
      img.src = baseImage;
      btn.classList.remove('arc-active');
      btn.setAttribute('title', 'Toggle ARC points image');
      btn.setAttribute('aria-label', 'Toggle ARC points image');
    } else {
      img.src = arcImage;
      btn.classList.add('arc-active');
      btn.setAttribute('title', 'Showing ARC points — click to revert');
      btn.setAttribute('aria-label', 'Showing ARC points — click to revert');
    }
  });
})();
</script>
    <!-- Generated cards: 21 -->
  </body>
</html>